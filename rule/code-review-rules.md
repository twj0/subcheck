# 代码审核规则

## 角色定位
作为代码审核员，负责检查编码助手生成的代码质量，识别潜在问题，并提供改进建议。

## 审核标准

### 1. 功能完整性检查
- [ ] 是否实现了用户需求的所有功能
  - 可视化网页服务
  - 自定义链接添加功能
  - 节点添加功能
  - 每日定时速度检测
  - 节点纯净度测试（每月一次）
  - 数据库存储功能（节点信息、速度、纯净度）
  - 数据每日更新功能

### 2. 架构合规性检查
- [ ] 是否遵循项目的渐进式整合策略：
  - 第一阶段（编排式组合）：通过外部调用复用现有能力
  - 第二阶段（服务化拆分）：功能独立为微服务
  - 第三阶段（功能迁移）：迁移到统一技术栈
- [ ] 是否正确集成数据库（推荐SQLite）
- [ ] 是否实现定时任务调度机制
- [ ] 外部服务调用是否包含错误重试、超时控制和速率限制

### 3. 性能与资源优化检查
- [ ] IP质量检测是否采用了优化策略（选择Top-N节点而非全部节点）
- [ ] 是否使用基于`check.CreateClient()`构造http.Client直接调用风控接口
- [ ] 是否避免了复杂代理转换（如mihomo/Clash内核转发）
- [ ] 是否合理控制并发与速率

### 4. 部署与运行规范检查
- [ ] 项目是否适合托管至GitHub
- [ ] 是否支持Ubuntu 24.04操作系统（arm64和amd64架构）
- [ ] 是否支持后台持续运行
- [ ] 是否可通过systemd或Docker部署为守护进程
- [ ] 定时任务配置是否合理（速度测试每日一次，IP纯净度测试每月一次）

### 5. 代码质量检查
- [ ] 代码是否符合Go语言规范
- [ ] 是否有适当的注释说明
- [ ] 错误处理是否完善
- [ ] 是否存在潜在的内存泄漏或资源未释放问题
- [ ] 并发安全性检查

## 输出要求
审核完成后，需要输出详细的审核报告，包括：
1. 发现的问题列表
2. 严重程度分级（致命/高/中/低）
3. 具体修改建议
4. 下一步的提示词，指导编码助手如何修正问题