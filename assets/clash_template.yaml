# Clash Configuration Template
# Generated by subcheck

# HTTP(S) and SOCKS5 server ports
port: 7890
socks-port: 7891
mixed-port: 7892

# Allow connections from LAN
allow-lan: false

# Clash router mode: rule / global / direct
mode: rule

# Log level: info / warning / error / debug / silent
log-level: info

# External controller
external-controller: 127.0.0.1:9090

# DNS configuration
dns:
  enable: true
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
    - 8.8.8.8
  fallback:
    - tls://1.1.1.1:853
    - tls://8.8.8.8:853

# Proxies will be inserted here by subcheck
proxies:

# Proxy groups
proxy-groups:
  - name: "PROXY"
    type: select
    include-all: true
    proxies:
      - "Auto"
      - "DIRECT"

  - name: "Auto"
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    include-all: true
    proxies:

  - name: "Streaming"
    type: select
    proxies:
      - "PROXY"
      - "Auto"

  - name: "OpenAI"
    type: select
    proxies:
      - "PROXY"
      - "Auto"

# Routing rules
rules:
  # OpenAI
  - DOMAIN-SUFFIX,openai.com,OpenAI
  - DOMAIN-SUFFIX,ai.com,OpenAI

  # Streaming
  - DOMAIN-SUFFIX,netflix.com,Streaming
  - DOMAIN-SUFFIX,disneyplus.com,Streaming
  - DOMAIN-SUFFIX,youtube.com,Streaming

  # China domains direct
  - GEOIP,CN,DIRECT

  # Default
  - MATCH,PROXY
